import{a as W,b as X}from"./chunk-MNBG36FE.js";import{c as Q,d as U}from"./chunk-JYT2CLVU.js";import{a as q,b as V,c as H}from"./chunk-HWYKQBRZ.js";import{a as Y}from"./chunk-6CODQMIM.js";import{E as D,F as G,J as j,S as J,U as K,b as k,c as g,f as O,g as y,j as S,l as E,m as w,o as I,q as B,r as R,s as z,t as L,u as A,v as T,w as N}from"./chunk-KYOJ3EPE.js";import{D as F,E as P}from"./chunk-3L67TLAT.js";import{Ca as c,Eb as h,Ga as d,Hb as C,Pa as e,Pb as M,Qa as i,Qb as _,Ra as p,Tb as v,Va as b,eb as r,fa as u,pa as m,ta as s,xa as x}from"./chunk-GY52ECZ2.js";function $(o,t){o&1&&(e(0,"mat-error"),r(1," Email is required "),i())}function tt(o,t){o&1&&(e(0,"mat-error"),r(1," Invalid email "),i())}function et(o,t){o&1&&p(0,"mat-spinner",14)}function it(o,t){o&1&&(e(0,"mat-icon"),r(1,"search"),i())}var Z=class o{constructor(t,n,a,l){this.fb=t;this.router=n;this.dataService=a;this.snackBar=l}loginForm;isLoading=u(!1);ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({email:["",[g.required,g.email]]}),this.loginForm.get("email")?.valueChanges.subscribe(()=>{})}onSubmit(){if(!this.loginForm.valid){this.markFormGroupTouched();return}this.isLoading.set(!0);try{let t=this.loginForm.get("email")?.value.trim().toLowerCase(),n=this.dataService.findCandidateByEmail(t);if(!n){this.snackBar.open("Email address not found in the system","Close",{duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}if(!n.canEdit){this.snackBar.open("Cannot edit registration - more than 3 days have passed","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}this.snackBar.open("Candidate found! Beyond editing details...","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),this.router.navigate(["/registration",n.id])}catch(t){console.error("Error during login:",t),this.snackBar.open("System error. Please try again.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}static \u0275fac=function(n){return new(n||o)(s(I),s(M),s(Y),s(Q))};static \u0275cmp=x({type:o,selectors:[["app-add-edit-register"]],decls:29,vars:6,consts:[[1,"registration-container"],[1,"registration-card"],[1,"header-content"],[1,"header-text"],[1,"registration-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"submit-btn",3,"disabled"],["diameter","20","class","spinner",4,"ngIf"],[1,"back-button-container",2,"margin-top","16px"],["mat-stroked-button","","routerLink","/home"],["diameter","20",1,"spinner"]],template:function(n,a){if(n&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"div",3)(5,"mat-card-title"),r(6,"Login"),i(),e(7,"mat-card-subtitle"),r(8,"Enter your email address to access registration details."),i()()()(),e(9,"mat-card-content")(10,"form",4),b("ngSubmit",function(){return a.onSubmit()}),e(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),r(14,"Email"),i(),p(15,"input",7),c(16,$,2,0,"mat-error",8)(17,tt,2,0,"mat-error",8),i()(),e(18,"div",9)(19,"button",10),c(20,et,1,0,"mat-spinner",11)(21,it,2,0,"mat-icon",8),e(22,"span"),r(23,"Search for registration"),i()()()(),e(24,"div",12)(25,"button",13)(26,"mat-icon"),r(27,"arrow_back"),i(),r(28," Back to list "),i()()()()()),n&2){let l,f;m(10),d("formGroup",a.loginForm),m(6),d("ngIf",(l=a.loginForm.get("email"))==null?null:l.hasError("required")),m(),d("ngIf",(f=a.loginForm.get("email"))==null?null:f.hasError("email")),m(2),d("disabled",!a.loginForm.valid||a.isLoading()),m(),d("ngIf",a.isLoading()),m(),d("ngIf",!a.isLoading())}},dependencies:[C,h,v,_,B,S,k,O,y,E,w,N,R,L,T,A,z,q,j,D,G,H,V,K,J,P,F,X,W,U],styles:[".registration-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;color:#fff}.registration-card[_ngcontent-%COMP%]{margin-bottom:20px;background:linear-gradient(180deg,#101a2e99,#0a122099);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid color-mix(in oklab,var(--neon-cyan, #00FFFF),transparent 78%);border-radius:16px;box-shadow:0 8px 28px #0009,0 0 24px #00ffff14;transition:box-shadow .25s ease}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.space-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2}.header-text[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:5px;color:#fff}.edit-notification[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#0b0c1099;color:#fff;padding:12px;border-radius:8px;margin-bottom:20px;border:1px solid color-mix(in oklab,#00FFFF,transparent 75%)}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;color:#fff;border-bottom:2px solid color-mix(in oklab,#00FFFF,transparent 80%);padding-bottom:5px}.form-row[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}.image-upload-container[_ngcontent-%COMP%]{margin-top:10px}.upload-placeholder[_ngcontent-%COMP%]{border:2px dashed color-mix(in oklab,#00FFFF,transparent 70%);border-radius:12px;padding:40px;text-align:center;cursor:pointer;transition:border-color .3s ease,box-shadow .3s ease;color:#fff;background:linear-gradient(180deg,#0c142266,#080e1a66)}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:color-mix(in oklab,#00FFFF,transparent 45%);box-shadow:0 0 18px #0ff3}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0ff;margin-bottom:10px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:12px;box-shadow:0 2px 10px #0006,0 0 16px #00ffff1f}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;background-color:#f44336;color:#fff;border-radius:50%}.change-image-btn[_ngcontent-%COMP%]{display:block;margin-top:10px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-top:30px}.submit-btn[_ngcontent-%COMP%]{min-width:200px;height:48px;font-size:1.1rem}.success-card[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0e182880,#0a122080);border:1px solid #4caf50;border-radius:12px;color:#fff}.success-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.success-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;margin-bottom:15px}.success-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4caf50;margin-bottom:10px}.edit-note[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:5px;color:#fff;font-size:.9rem;margin-top:15px;opacity:.9}@media (max-width: 768px){.registration-container[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.half-width[_ngcontent-%COMP%]{width:100%}.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.submit-btn[_ngcontent-%COMP%]{width:100%}}"]})};export{Z as AddEditRegisterComponent};
