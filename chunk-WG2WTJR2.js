import{a as K,b as Q,c as U,d as W}from"./chunk-U66KFPPU.js";import"./chunk-7RWCIHFI.js";import{a as q,b as H,c as J}from"./chunk-NBUBK4VJ.js";import{a as X}from"./chunk-TKLGFMIO.js";import{C as A,E as B,F as I,G as R,H as z,I as T,J as N,K as G,L,M as j,Q as V,a as v,b as p,e as F,f as P,i as O,k,l as S,m as y,o as w}from"./chunk-2ORLEMAW.js";import{D as E,E as _}from"./chunk-5SXJYR7R.js";import{Ba as u,Db as b,Fa as d,Gb as h,Nb as C,Oa as i,Pa as r,Qa as s,Rb as M,Ua as D,db as a,ea as f,oa as m,sa as c,wa as x}from"./chunk-ZGRP53YT.js";function Z(e,t){e&1&&(i(0,"mat-error"),a(1," \u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05E0\u05D3\u05E8\u05E9\u05EA "),r())}function $(e,t){e&1&&(i(0,"mat-error"),a(1," \u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4 "),r())}function tt(e,t){e&1&&s(0,"mat-spinner",12)}function et(e,t){e&1&&(i(0,"mat-icon"),a(1,"search"),r())}var Y=class e{constructor(t,o,n,l){this.fb=t;this.router=o;this.dataService=n;this.snackBar=l}loginForm;isLoading=f(!1);ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({email:["",[p.required,p.email]]}),this.loginForm.get("email")?.valueChanges.subscribe(()=>{})}onSubmit(){if(!this.loginForm.valid){this.markFormGroupTouched();return}this.isLoading.set(!0);try{let t=this.loginForm.get("email")?.value.trim().toLowerCase(),o=this.dataService.findCandidateByEmail(t);if(!o){this.snackBar.open("\u05DB\u05EA\u05D5\u05D1\u05EA \u05D4\u05DE\u05D9\u05D9\u05DC \u05DC\u05D0 \u05E0\u05DE\u05E6\u05D0\u05D4 \u05D1\u05DE\u05E2\u05E8\u05DB\u05EA","\u05E1\u05D2\u05D5\u05E8",{duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}if(!o.canEdit){this.snackBar.open("\u05DC\u05D0 \u05E0\u05D9\u05EA\u05DF \u05DC\u05E2\u05E8\u05D5\u05DA \u05D0\u05EA \u05D4\u05D4\u05E8\u05E9\u05DE\u05D4 - \u05E2\u05D1\u05E8\u05D5 \u05D9\u05D5\u05EA\u05E8 \u05DE-3 \u05D9\u05DE\u05D9\u05DD","\u05E1\u05D2\u05D5\u05E8",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}this.snackBar.open("\u05DE\u05D5\u05E2\u05DE\u05D3 \u05E0\u05DE\u05E6\u05D0! \u05DE\u05E2\u05D1\u05E8 \u05DC\u05E2\u05E8\u05D9\u05DB\u05EA \u05E4\u05E8\u05D8\u05D9\u05DD...","\u05E1\u05D2\u05D5\u05E8",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),this.dataService.saveId(o.id),this.router.navigate(["/registration"])}catch(t){console.error("Error during login:",t),this.snackBar.open("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05E2\u05E8\u05DB\u05EA. \u05E0\u05E1\u05D4 \u05E9\u05D5\u05D1.","\u05E1\u05D2\u05D5\u05E8",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]})}finally{this.isLoading.set(!1)}}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}static \u0275fac=function(o){return new(o||e)(c(y),c(C),c(X),c(U))};static \u0275cmp=x({type:e,selectors:[["app-add-edit-register"]],decls:24,vars:6,consts:[[1,"registration-container"],[1,"registration-card"],[1,"header-content"],[1,"header-text"],[1,"registration-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"submit-btn",3,"disabled"],["diameter","20","class","spinner",4,"ngIf"],["diameter","20",1,"spinner"]],template:function(o,n){if(o&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"div",3)(5,"mat-card-title"),a(6,"\u05DB\u05E0\u05D9\u05E1\u05D4 \u05DC\u05DE\u05D5\u05E2\u05DE\u05D3 \u05E7\u05D9\u05D9\u05DD"),r(),i(7,"mat-card-subtitle"),a(8,"\u05D4\u05D6\u05DF \u05D0\u05EA \u05DB\u05EA\u05D5\u05D1\u05EA \u05D4\u05DE\u05D9\u05D9\u05DC \u05E9\u05DC\u05DA \u05DC\u05D2\u05D9\u05E9\u05D4 \u05DC\u05E4\u05E8\u05D8\u05D9 \u05D4\u05D4\u05E8\u05E9\u05DE\u05D4"),r()()()(),i(9,"mat-card-content")(10,"form",4),D("ngSubmit",function(){return n.onSubmit()}),i(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),a(14,"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC"),r(),s(15,"input",7),u(16,Z,2,0,"mat-error",8)(17,$,2,0,"mat-error",8),r()(),i(18,"div",9)(19,"button",10),u(20,tt,1,0,"mat-spinner",11)(21,et,2,0,"mat-icon",8),i(22,"span"),a(23,"\u05D7\u05E4\u05E9 \u05D4\u05E8\u05E9\u05DE\u05D4"),r()()()()()()()),o&2){let l,g;m(10),d("formGroup",n.loginForm),m(6),d("ngIf",(l=n.loginForm.get("email"))==null?null:l.hasError("required")),m(),d("ngIf",(g=n.loginForm.get("email"))==null?null:g.hasError("email")),m(2),d("disabled",!n.loginForm.valid||n.isLoading()),m(),d("ngIf",n.isLoading()),m(),d("ngIf",!n.isLoading())}},dependencies:[h,b,M,w,O,v,F,P,k,S,G,I,z,N,T,R,q,V,L,j,J,H,B,A,_,E,Q,K,W],styles:[".registration-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;color:#fff;text-align:right}.registration-card[_ngcontent-%COMP%]{margin-bottom:20px;background:linear-gradient(180deg,#101a2e99,#0a122099);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid color-mix(in oklab,var(--neon-cyan, #00FFFF),transparent 78%);border-radius:16px;box-shadow:0 8px 28px #0009,0 0 24px #00ffff14}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.space-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2}.header-text[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:5px;color:#fff}.edit-notification[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#0b0c1099;color:#fff;padding:12px;border-radius:8px;margin-bottom:20px;border:1px solid color-mix(in oklab,#00FFFF,transparent 75%)}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;color:#fff;border-bottom:2px solid color-mix(in oklab,#00FFFF,transparent 80%);padding-bottom:5px}.form-row[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}.image-upload-container[_ngcontent-%COMP%]{margin-top:10px}.upload-placeholder[_ngcontent-%COMP%]{border:2px dashed color-mix(in oklab,#00FFFF,transparent 70%);border-radius:12px;padding:40px;text-align:center;cursor:pointer;transition:border-color .3s ease,box-shadow .3s ease;color:#fff;background:linear-gradient(180deg,#0c142266,#080e1a66)}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:color-mix(in oklab,#00FFFF,transparent 45%);box-shadow:0 0 18px #0ff3}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0ff;margin-bottom:10px}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:12px;box-shadow:0 2px 10px #0006,0 0 16px #00ffff1f}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;background-color:#f44336;color:#fff;border-radius:50%}.change-image-btn[_ngcontent-%COMP%]{display:block;margin-top:10px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-top:30px}.submit-btn[_ngcontent-%COMP%]{min-width:200px;height:48px;font-size:1.1rem}.success-card[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0e182880,#0a122080);border:1px solid #4caf50;border-radius:12px;color:#fff}.success-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.success-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;margin-bottom:15px}.success-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4caf50;margin-bottom:10px}.edit-note[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:5px;color:#fff;font-size:.9rem;margin-top:15px;opacity:.9}@media (max-width: 768px){.registration-container[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.half-width[_ngcontent-%COMP%]{width:100%}.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.submit-btn[_ngcontent-%COMP%]{width:100%}}"]})};export{Y as AddEditRegisterComponent};
